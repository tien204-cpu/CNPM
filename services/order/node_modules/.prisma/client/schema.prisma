generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Order {
  id                  String      @id @default(cuid())
  total               Float
  status              String      @default("Điều drone tới nhà hàng")
  createdAt           DateTime    @default(now())
  userEmail           String?
  shippingName        String?
  shippingPhone       String?
  shippingAddress     String?
  paymentMethod       String?
  shippingLat         Float?
  shippingLng         Float?
  items               OrderItem[]
  drone               Drone?      @relation(fields: [droneId], references: [id])
  droneId             String?
  droneName           String?
  droneSpeed          Float?
  deliveryTimeSeconds Int?
}

model OrderItem {
  id        String @id @default(cuid())
  order     Order  @relation(fields: [orderId], references: [id])
  status    String @default("Điều drone tới nhà hàng")
  orderId   String
  productId String
  qty       Int
}

model Drone {
  id       String  @id @default(cuid())
  name     String
  imageUrl String?
  status   String  @default("ready")
  isActive Boolean @default(false)
  speedKmh Float?
  battery  Float   @default(100)
  orders   Order[]
}
